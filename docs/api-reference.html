<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Van Cone | API Documentation</title>
    <link rel="stylesheet" href="./style.css" />
</head>
<body>
    <img id="van-logo-right-side" src="./img/logo-615x892.png" alt="Van Cone Logo" />   
    <div id="sidebar">
        <a href="./"><h1>Van Cone</h1></a>
        <a id="van-logo-sidebar" href="./">
            <img id="van-logo-sidebar-img" src="./img/logo-308x446.png" alt="Van Cone Logo" />
        </a>
        <p id="version">version 1.0.1</p>
        <hr />
        <ul>
            <li><a href="./getting-started.html">Getting Started</a></li>
            <li><a href="./routing-and-nav-guide.html">Routing and Nav Guide</a></li>
            <li><a href="./component-guide.html">Component Guide</a></li>
            <li><a href="./api-reference.html">API Reference</a></li>
            <li><a href="https://github.com/medium-tech/van-cone/tree/main/examples" target="_blank">Examples</a></li>
            <li><a href="https://github.com/b-rad-c/van-cone" target="_blank">Source code</a></li>
            <li><a href="https://www.npmjs.com/package/van-cone" target="_blank">npm package</a></li>
        </ul>
    </div>
    <div id="content">
        <h1 id="api-reference">API Reference</h1>
<p>The Van Cone library only has one exported item which the <code>createCone</code> function used to create a Van Cone SPA app. The first section of the API documentation describes this function and the second describes the functions and properties returned by it.</p>
<h1 id="creating-a-van-cone-app">Creating a Van Cone app</h1>
<hr />
<h2 id="createconeconeconfig">createCone(coneConfig)</h2>
<p>The only exported function from the module, used to create an application.</p>
<p><strong>arguments</strong></p>
<ul>
<li><a href="#coneconfig">coneConfig</a> - used to configure the cone app</li>
</ul>
<p><strong>return</strong></p>
<ul>
<li><a href="#coneapp">coneApp</a> - an object containing methods and properties useful for creating an SPA.</li>
</ul>
<h3 id="coneconfig">coneConfig</h3>
<ul>
<li><p>routerElement - (required) the root DOM element element that holds the app (element defined by active route)</p>
</li>
<li><p>defaultNavState - (optional) the default navigation state, any type allowed by <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState"><code>history.pushState</code></a></p>
</li>
<li><p><a href="#routerconfig">routerConfig</a> = (optional) - configure <code>prefix</code> to prepend to each url, or <code>backendPrefix</code> if different than frontend.</p>
</li>
</ul>
<h3 id="routerconfig">routerConfig</h3>
<p>An object used to configure the router, it has two optional keys <code>prefix</code> and <code>backendPrefix</code>. If <code>routerConfig</code> is not provided or either key is not provided they will default to an empty string. </p>
<p><code>prefix</code> - (optional) a string to be prepended to front end URLs. See <a href="#navurlroutename-params-query"><code>navUrl</code></a> for more. If not provided will default to an empty string.</p>
<p><code>backendPrefix</code> - (optional) useful for when the backend is at a different host or has a different prefix than the front end. It is only used as a utility to generate URLs for fetching data, it is ignored for route matching and page navigation. See <a href="#backendurlroutename-params-query"><code>backendUrl</code></a> for more.</p>
<h1 id="using-the-van-cone-app">Using the Van Cone app</h1>
<hr />
<h2 id="coneapp">coneApp</h2>
<p>The <code>coneApp</code> object is returned from the <a href="#createconeconeconfig">createCone</a> function and contains the following properties and methods to build your SPA app.</p>
<ul>
<li><p><a href="#linkprops-children">link</a> - a VanJS link component that navigates to named routes and includes active link css styling</p>
</li>
<li><p><a href="#navigateroutename-options">navigate</a> - a function for programmatic navigation</p>
</li>
<li><p><a href="#iscurrentpagepagename">isCurrentPage</a> - a function to determine if a page is currently active</p>
</li>
<li><p><a href="#navurlroutename-params-query">navUrl</a> - a function to generate a url string given a route name and url and query params.</p>
</li>
<li><p><a href="#backendurlroutename-params-query">backendUrl</a> - a function to generate a url string given a route name and url and query params.</p>
</li>
<li><p>routerElement - the same element passed to this function</p>
</li>
<li><p>currentPage - a <code>van.state</code> object representing the <code>name</code> value of the active route</p>
</li>
<li><p>navState - a <code>van.state</code> object representing the current <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/state"><code>window.history.state</code></a></p>
</li>
<li><p>getNavState - a function that returns <code>navState.val</code></p>
</li>
<li><p>setNavState - change <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/state"><code>window.history.state</code></a>, any type allowed by <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState"><code>history.pushState</code></a></p>
</li>
</ul>
<h3 id="navurlroutename-params-query">navUrl(routeName, params, query)</h3>
<p>Return a string representing a url for the route with name <code>routeName</code>, and optionally form url params with the <code>params</code> argument or query params with the <code>query</code> argument. If <code>prefix</code> was included with <a href="#routerconfig"><code>routerConfig</code></a> it will be prepended to the url. This function is used internally by programmatic navigation in <a href="#linkprops-children"><code>link</code></a>, <a href="#navigateroutename-options"><code>navigate</code></a> and <a href="#pushhistoryroutename-options"><code>pushHistory</code></a> and is generally not needed, but it exposed publically in case there is a need for the string. Note that the string is also returned by the programmatic functions.</p>
<p><strong>Note: to access this function from the return value of <a href="#createconerouterelement-routes-defaultnavstate"><code>createCone</code></a> call <code>navUrl</code></strong></p>
<p>The following <a href="#routes"><code>route</code></a>:</p>
<pre><code class="hljs language-javascript">{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:userId&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | User&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/user&#x27;</span>)
}
</code></pre><p>will result in the following:</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">navUrl</span>(<span class="hljs-string">&#x27;user&#x27;</span>, { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> }, { <span class="hljs-attr">activeTab</span>: <span class="hljs-string">&#x27;profile&#x27;</span>})
<span class="hljs-comment">// &quot;/user/123?activeTab=profile&quot;</span>
</code></pre><h3 id="backendurlroutename-params-query">backendUrl(routeName, params, query)</h3>
<p>Return a string backend url for the route with name <code>routeName</code>, and optionally form url params with the <code>params</code> argument or query params with the <code>query</code> argument. The return can be used for fetching data. If <code>backendPrefix</code> was included with <a href="#routerconfig"><code>routerConfig</code></a> it will be prepended to the url.</p>
<p>The following <a href="#routerconfig"><code>routerConfig</code></a> and <a href="#routes"><code>routes</code></a>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> routerConfig = { <span class="hljs-attr">backendPrefix</span>: <span class="hljs-string">&#x27;http://localhost:8000&#x27;</span> }

<span class="hljs-keyword">const</span> routes = [
  {
      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:userId&quot;</span>,
      <span class="hljs-attr">backend</span>: <span class="hljs-string">&quot;/api/user/:userId&quot;</span>
      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | User&quot;</span>,
      <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/user&#x27;</span>)
  }
]
</code></pre><p>Will result in the following:</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">backendUrl</span>(<span class="hljs-string">&#x27;user&#x27;</span>, { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> })
<span class="hljs-comment">// &quot;http://localhost:8000/api/user/123&quot;</span>

<span class="hljs-title function_">navUrl</span>(<span class="hljs-string">&#x27;user&#x27;</span>, { <span class="hljs-attr">itemId</span>: <span class="hljs-number">123</span> })
<span class="hljs-comment">// &quot;http://localhost:8000/user/123&quot;</span>
</code></pre><h3 id="navigateroutename-options">navigate(routeName, options)</h3>
<p>Programmatically navigate to <code>routeName</code> using url generated by <a href="#navurlroutename-params-query"><code>navUrl</code></a>, returns url as a string.</p>
<p><code>routeName</code> - (required) a string representing the name of the route</p>
<p><code>options</code> - (optional) an object with the following optional options</p>
<ul>
<li><code>params</code> - supply url parameters to be used with <code>routeName</code> to generate the url</li>
<li><code>query</code> - supply query string parameters to be used with <code>routeName</code> to generate the url</li>
<li><code>navState</code> - if provided is provided it will be set as the browser history state using <code>setNavState</code> returned by the <a href="#createconerouterelement-routes-defaultnavstate"><code>createCone</code></a> function.</li>
<li><code>context</code> - if provided it will be pased to the resolved component for <code>routeName</code>. See <a href="./component-guide.html#full-component-example"><code>example</code></a> for details.</li>
<li><code>dispatch</code> - if true (the default) DOM will be updated with component configured for the route. Pass false if only browser history needs to be updated. Note that if you only want to update history you should use the <a href="#pushhistoryroutename-options"><code>pushHistory</code></a> function instead.</li>
</ul>
<h3 id="pushhistoryroutename-options">pushHistory(routeName, options)</h3>
<p>A wrapper around <a href="#navigateroutename-options"><code>navigate</code></a> that will only push a new browser state to the history stack and will not change the DOM.</p>
<h3 id="iscurrentpagepagename">isCurrentPage(pageName)</h3>
<p>Return a boolean that is <code>true</code> when <code>pageName</code> is the active route</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">if</span> (<span class="hljs-title function_">isCurrentPage</span>(<span class="hljs-string">&quot;home&quot;</span>)) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;we&#x27;re home!&quot;</span>)
</code></pre><h3 id="linkprops-children">link(props, ...children)</h3>
<p>A light wrapper around <code>van.tags.a</code> that adds dynamic url generation for <code>routeName</code>, with url and query params to be used when generating the url with <a href="#navurlroutename-params-query"><code>navUrl</code></a>. It also adds dynamic styling when <code>routeName</code> is the active route. Additional context can be provided to the component resolved by the router. For example, <code>link</code> could be used on a search results page to navigate to each item&#39;s page and could pass the item&#39;s data enabling item page to use preloaded data instead of fetching it.</p>
<h4 id="arguments">arguments</h4>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">link</span>(props, ...children)
</code></pre><p>The argument signature is the same as <code>van.tags.a</code> but additional properties are available to the <code>props</code> argument which configure how the link component works.</p>
<p><code>props</code> - an object that will be passed to the resulting <code>van.tags.a</code> function, unchanged with the following exceptions:</p>
<p>These are Van Cone props which are used for navigation and <strong>will not</strong> be passed to <code>van.tags.a</code>:</p>
<ul>
<li><code>props.name</code> (required) - the name of the route to navigate to</li>
<li><code>props.params</code> (optional) - an object of url parameters defined by the route</li>
<li><code>props.query</code> (optional) - an object of query string parameters</li>
<li><code>props.context</code> (optional) - additional data to be passed to the component, see <a href="./component-guide.html#full-component-example">component example</a> for more info.</li>
<li><code>props.navState</code> (optional) - optional data to set on <code>window.history.state</code>, see <a href="#createconerouterelement-routes-defaultnavstate"><code>createCone</code></a> for more.</li>
</ul>
<p>The following are standard <code>a</code> tag props but have the following default values:</p>
<ul>
<li><code>props.target</code> (default: <code>_self</code>)</li>
<li><code>props.class</code> (default: <code>router-link</code>)</li>
</ul>
<p>The following are standard <code>a</code> tag props but are set by the <code>link</code> component and will be overwritten if provided:</p>
<ul>
<li><code>props.href</code> is set by a call to <a href="#navurlroutename-params-query"><code>navUrl</code></a> with <code>props.name</code>, <code>props.params</code> and <code>props.query</code></li>
<li><code>props.role</code> is set to <code>link</code></li>
<li><code>props.onClick</code> is set to an internal navigation function</li>
</ul>
<p><code>children</code> - is passed unchanged to the resulting <code>van.tags.a</code> function.</p>
<h4 id="examples">examples</h4>
<p>A basic call to the route named <code>home</code> with the inner text for the a tag <code>Home</code>. This is the bare minimum required for <code>link</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">link</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>}, <span class="hljs-string">&#x27;Home&#x27;</span>)
</code></pre><p>A call to the route named <code>user</code> with the url param <code>userId</code> set to <code>123</code>, the inner text for the a tag is <code>User</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">link</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-attr">params</span>: {<span class="hljs-attr">userId</span>: <span class="hljs-number">123</span>}}, <span class="hljs-string">&#x27;User&#x27;</span>)
</code></pre><p>A call to the route named <code>users</code> with the query param <code>sort</code> set to <code>asc</code>, the inner text for the link is <code>ascending</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">link</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;users&#x27;</span>, <span class="hljs-attr">query</span>: {<span class="hljs-attr">sort</span>: <span class="hljs-string">&#x27;asc&#x27;</span>}}, <span class="hljs-string">&#x27;ascending&#x27;</span>)
</code></pre><p>Pass additional context which can be any data type to the component resolved by the route. See <a href="./component-guide.html#full-component-example">example</a> for how to access context from within the component.</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">link</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;users&#x27;</span>, <span class="hljs-attr">context</span>: {<span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;hello world&#x27;</span>}}, <span class="hljs-string">&#x27;User&#x27;</span>)
</code></pre><h4 id="styling">styling</h4>
<p>By default the class name for the a tag will be <code>router-link</code> but you can override it with the <code>class</code> property:</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">link</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>, <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;navbar-link&#x27;</span>}, <span class="hljs-string">&quot;Home&quot;</span>)
</code></pre><p>When the route for a <code>link</code> is active, the a tag&#39;s <code>aria-current</code> property will be set to <code>page</code>, which means you can set a custom style in your CSS like this:</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* normal route */</span>
<span class="hljs-selector-class">.navbar-link</span> {
  <span class="hljs-attribute">color</span>: grey;
}

<span class="hljs-comment">/* active route */</span>
<span class="hljs-selector-class">.navbar-link</span><span class="hljs-selector-attr">[aria-current=<span class="hljs-string">&quot;page&quot;</span>]</span> {
  <span class="hljs-attribute">color</span>: black;
}
</code></pre><h4 id="a-tag-only">a tag only</h4>
<p>Currently <code>link</code> only supports returning an <code>a</code> tag, but by using <a href="#navigateroutename-options"><code>navigate</code></a> you could make any element a router link, and then use <a href="#iscurrentpagepagename"><code>isCurrentPage</code></a> to dynamically change properties such as class or styling when the route is active.</p>

    </div>
</body>