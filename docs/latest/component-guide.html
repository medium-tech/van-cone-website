<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Van Cone | Component Guide</title>
    <link rel="stylesheet" href="/style.css" />
</head>
<body>
    <img id="van-logo-right-side" src="/img/logo-615x892.png" alt="Van Cone Logo" />   
    <div id="sidebar">
        <a href="/"><h1>Van Cone</h1></a>
        <a id="van-logo-sidebar" href="/">
            <img id="van-logo-sidebar-img" src="/img/logo-308x446.png" alt="Van Cone Logo" />
        </a>
        <ul>
            <li><a href="/latest/getting-started.html">Getting Started</a></li>
            <li><a href="/latest/component-guide.html">Component Guide</a></li>
            <li><a href="/latest/api-reference.html">API Reference</a></li>
        </ul>
    </div>
    <div id="content">
        <h1 id="component-and-routing-guide">Component and routing guide</h1>
<p>In an effort to keep the VanJS ecosystem minimal Van Cone does not define a component object or function like many reactive frameworks however you will see that they are not necessary with Van Cone and VanJS. When the term component is used in Van Cone documentation it refers to a callable that takes a specific set of arguments from the Van Cone router and returns a tag element from Van JS, for example <code>van.tags.div</code>. These &quot;components&quot; are only used with the router to create a navigable page, for other re-useable &quot;components&quot; you can use a bare function like normal VanJS code.</p>
<p>In this guide you will find:</p>
<ul>
<li><a href="#function-signature">component function signature</a></li>
<li><a href="#hello-world-with-router">a hello world example</a></li>
<li><a href="#url--query-params-example">a url and query param example</a></li>
<li><a href="#full-component-example">a full component example with nav link component and context</a></li>
<li><a href="#different-backend-endpoint">an example using a backend endpoint which is different than the frontend</a></li>
<li><a href="#wildcard-not-found-page">wildcard / 404 not found</a></li>
<li><a href="#define-the-routes-component-via-callable">define the route&#39;s component via callable</a></li>
<li><a href="#define-the-routes-component-via-import">define the route&#39;s component via import</a></li>
</ul>
<h1 id="component-functions">Component functions</h1>
<p>A component function takes up to 3 arguments and returns a van js tag element. The Van Cone router will call this component function when activating the route.</p>
<h2 id="function-signature">function signature</h2>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">myComponent</span> = (<span class="hljs-params">params, query, context</span>) =&gt; <span class="hljs-title function_">div</span>(...)
</code></pre><p><code>params</code> - an object of parameters parsed out of the url, see example below for defining the router. If no parameters were defined in the router this will be an empty object.</p>
<p><code>query</code> - an object of query string parameters, if none exist in the url this will be an empty object.</p>
<p><code>context</code> - additional context (for example prefetched data) can be passed to the component when navigating using the <a href="/latest/api-reference.html#linkprops-children">link component</a> or the programmatic navigation function <a href="/latest/api-reference.html#navigateroutename-options">navigate</a>. If none is provided this will be an empty object. Typically this would be an object but it could be any data type.</p>
<h2 id="function-return">function return</h2>
<p>An <code>HTMLElement</code>, typically (but not necessarily) created by a VanJS tag, such as <code>van.tags.div</code>.</p>
<h1 id="examples">Examples</h1>
<h3 id="the-hello-world">the hello world</h3>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">homePage</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">div</span>(<span class="hljs-string">&#x27;Home Page&#x27;</span>)
</code></pre><p>You obviously don&#39;t need a framework to do this, outside of the Van Cone router, components are generally not needed because they are simply a function that returns a van element. They are many ways to create re-usable components, component functions in Van Cone are only useful to create a concept of a page that integrates with the router.</p>
<h3 id="hello-world-with-router">hello world with router</h3>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">homePage</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">div</span>(<span class="hljs-string">&#x27;Home Page&#x27;</span>)

<span class="hljs-keyword">const</span> routes = [{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | Home&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; homePage
}]
</code></pre><h3 id="url--query-params-example">url + query params example</h3>
<p>URL params are defined in the <code>path</code> property of the route object using a colon, query params are automatically parsed and passed to the component without needing to setup anything in the route. Currently query args are returned as raw strings and the component may need to do its own type validation/conversion.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// use url params to parse a user id</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">userPage</span> = (<span class="hljs-params">params</span>) =&gt; <span class="hljs-title function_">div</span>(<span class="hljs-string">&#x27;User Page&#x27;</span>, <span class="hljs-title function_">p</span>(<span class="hljs-string">&#x27;userId: &#x27;</span> + params.<span class="hljs-property">userId</span>))

<span class="hljs-comment">// use query params to define a sort on a list page</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">userListPage</span> = (<span class="hljs-params">params, query</span>) =&gt; <span class="hljs-title function_">div</span>(<span class="hljs-string">&#x27;User List&#x27;</span>, <span class="hljs-title function_">p</span>(<span class="hljs-string">&#x27;sort by: &#x27;</span> + query.<span class="hljs-property">sort</span>))

<span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:userId&quot;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | User&quot;</span>,
        <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/user&#x27;</span>)
    },
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/users&quot;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;users&quot;</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | User List&quot;</span>,
        <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/userList&#x27;</span>)
    }
]
</code></pre><h3 id="full-component-example">full component example</h3>
<p>Here is a full example showing url parameters, query parameters and additional context.</p>
<p>Given the following route:</p>
<pre><code class="hljs language-javascript">{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:id&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | User&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/user&#x27;</span>)
}
</code></pre><p>A component can use the data as follows:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">userPage</span> = (<span class="hljs-params">params, query, context</span>) =&gt; {

  <span class="hljs-comment">/* our parent component, a search page may have passed in preloaded information via link, if not, we&#x27;ll fetch it */</span>
  <span class="hljs-keyword">const</span> userInfo = (context) ? context : <span class="hljs-title function_">fetchUserInfo</span>(params.<span class="hljs-property">id</span>)

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">div</span>(
    <span class="hljs-title function_">p</span>(<span class="hljs-string">&quot;Hi I am: &quot;</span> + userInfo.<span class="hljs-property">name</span>),
    <span class="hljs-title function_">p</span>(<span class="hljs-string">&quot;some query string data: &quot;</span> + query.<span class="hljs-property">data</span>)
  );
}
</code></pre><p>You can use the <a href="/latest/api-reference.html#linkprops-children"><code>link</code></a> component to navigate to this page like this:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> data = {<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;Mar√≠a&#x27;</span>}
<span class="hljs-title function_">link</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-attr">params</span>: {<span class="hljs-attr">id</span>: <span class="hljs-number">123</span>}, <span class="hljs-attr">query</span>: {<span class="hljs-string">&#x27;data&#x27;</span>: <span class="hljs-string">&#x27;hello&#x27;</span>}, <span class="hljs-attr">context</span>: data}, <span class="hljs-string">&#x27;User&#x27;</span>)
</code></pre><h3 id="different-backend-endpoint">different backend endpoint</h3>
<p>When data is fetched from a different endpoint provide a backend path as follows. See <a href="/latest/api-reference.html#backendurlroutename-params-query">backendUrl</a> for information on generating a backend url for fetching data.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:userId&quot;</span>,
        <span class="hljs-attr">backend</span>: <span class="hljs-string">&quot;/api/user/:userId&quot;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | User&quot;</span>,
        <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/user&#x27;</span>)
    }
]
</code></pre><h3 id="wildcard-not-found-page">wildcard (not found page)</h3>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> routes = [{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;.*&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;notFound&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | Not Found&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/notFound&#x27;</span>)
  }
];
</code></pre><h3 id="define-the-routes-component-via-callable">define the route&#39;s component via callable</h3>
<p>The simplest way to define a route&#39;s component.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">homePage</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">div</span>(<span class="hljs-string">&#x27;Home Page&#x27;</span>)

<span class="hljs-keyword">const</span> routes = [{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | Home&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; homePage
}]
</code></pre><h3 id="define-the-routes-component-via-import">define the route&#39;s component via import</h3>
<p>A route&#39;s component can also be returned via import.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// Define route</span>
<span class="hljs-keyword">const</span> routes = [{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;.*&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | Home&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./app/pages/homePage&#x27;</span>)
  }
];
</code></pre><p>define component:</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// ./app/pages/homePage.js</span>
<span class="hljs-keyword">import</span> van <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vanjs-core&quot;</span>;

<span class="hljs-keyword">const</span> { section, div, br, h1, img } = van.<span class="hljs-property">tags</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">homePage</span> = (<span class="hljs-params"></span>) =&gt; {

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">section</span>(
      <span class="hljs-title function_">h1</span>(<span class="hljs-string">&quot;Welcome to this SPA demo using VanJS!&quot;</span>),
      <span class="hljs-title function_">br</span>(),
      <span class="hljs-title function_">div</span>(
        { <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;text-align:center;&quot;</span> },
        <span class="hljs-title function_">img</span>({ <span class="hljs-attr">src</span>: vanLogo, <span class="hljs-attr">alt</span>: <span class="hljs-string">&quot;VanJS&quot;</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">&quot;height:100px;width:100px;&quot;</span> })
      )
    );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> homePage;
</code></pre><p>Note that you can also use a non-default export like this:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> routes = [{
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;.*&quot;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;VanJS Example | Home&quot;</span>,
    <span class="hljs-attr">callable</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./pageComponents&#x27;</span>).<span class="hljs-property">homePage</span>
  }
];
</code></pre>
    </div>
</body>